–ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –±–∞–≥–∏ —ñ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª.
–°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª plun —ñ –æ–ø–∏—à–∏ –≤—Å—ñ –∑–º—ñ–Ω–∏ —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –¥–ª—è –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –±–∞–≥–∏.

 1. –ö–†–ò–¢–ò–ß–ù–ê –ü–û–ú–ò–õ–ö–ê: –∑–º—ñ—à—É–≤–∞–Ω–Ω—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç canvas —ñ ‚Äú–ª–æ–≥—ñ—á–Ω–∏—Ö‚Äù –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞—Ä–∞–∑

handleCanvasClick üëâ –∑–∞–ø–∏—Å—É—î —Ç–æ—á–∫–∏ —É canvas-–ø—ñ–∫—Å–µ–ª—è—Ö

state.points.push({ x, y });


calculateAutoScale üëâ –º–∞—Å—à—Ç–∞–±—É—î —Ü—ñ –∂ —Å–∞–º—ñ –ø—ñ–∫—Å–µ–ª—ñ

drawCustomShape üëâ –º–∞–ª—é—î –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ –ø—ñ–∫—Å–µ–ª—ñ

‚ùó –£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ:

–ø–µ—Ä—à–∏–π —Ä–∞–∑ –≤—Å–µ –≤–∏–≥–ª—è–¥–∞—î –Ω–æ—Ä–º–∞–ª—å–Ω–æ

–∞–ª–µ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É redraw –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –≤–∂–µ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å

—Ñ—ñ–≥—É—Ä–∞ ¬´—Å—Ç—Ä–∏–±–∞—î¬ª, –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–∏–≤–Ω–æ, –≤—ñ–¥—Å—Ç—É–ø–∏ –ø–ª–∞–≤–∞—é—Ç—å

–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–æ)

üëâ points –º–∞—é—Ç—å –±—É—Ç–∏ –≤ –õ–û–ì–Ü–ß–ù–ò–• –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö, –Ω–µ –≤ canvas.

–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ñ—ñ–∫—Å (–¥—É–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

–ó–±–µ—Ä—ñ–≥–∞–π –Ω–µ–º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏, –∞ mouse –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥—å —É ‚Äúworld space‚Äù:

handleCanvasClick: function (e) {
  const state = window.AppState;
  if (e.button !== 0 || state.currentShapeMode !== "custom") return;

  const rect = state.canvas.getBoundingClientRect();

  // ‚ö†Ô∏è –ü–µ—Ä–µ–≤–æ–¥–∏–º–æ –∑ canvas -> logical
  const x = (e.clientX - rect.left - state.offsetX) / state.scale;
  const y = (e.clientY - rect.top - state.offsetY) / state.scale;

  state.points.push({ x, y });
  state.isShapeClosed = false;
  this.redrawCanvas();
}


–Ü –∑–±–µ—Ä—ñ–≥–∞–π scale / offset —É state, –∞ –Ω–µ –æ–±—á–∏—Å–ª—é–π —ó—Ö —è–∫ ‚Äú–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ñ‚Äù.

üî¥ 2. calculateAutoScale –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –ö–û–ñ–ù–û–ú–£ redraw
const { scale, offsetX, offsetY } = this.calculateAutoScale(points);

–ß–æ–º—É —Ü–µ –ø—Ä–æ–±–ª–µ–º–∞

scale –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–º

–∑–∞—Ä–∞–∑ –≤—ñ–Ω:

–∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ —Ç–æ—á–∫–∏

–∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ mousemove

—Ü–µ —Å—Ç–≤–æ—Ä—é—î –≤—ñ–¥—á—É—Ç—Ç—è ¬´–ª–∞–≥—ñ–≤¬ª —ñ ¬´–ø–ª–∏–≤—É—á–æ–≥–æ –∫–∞–Ω–≤–∞—Å—É¬ª

–Ø–∫ –∫—Ä–∞—â–µ

üëâ –û–±—á–∏—Å–ª—é–≤–∞—Ç–∏ scale —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏:

–¥–æ–¥–∞–ª–∏ —Ç–æ—á–∫—É

–∑–∞–∫—Ä–∏–ª–∏ —Ñ—ñ–≥—É—Ä—É

–æ—á–∏—Å—Ç–∏–ª–∏ canvas

state.scale = scale;
state.offsetX = offsetX;
state.offsetY = offsetY;


–ê –≤ drawCustomShape —Ç—ñ–ª—å–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

üî¥ 3. –ü–û–ú–ò–õ–ö–ê –∑ pointRadius
const pointRadius = Math.max(3, Math.min(6, 4 / scale * scale));


‚ùó 4 / scale * scale === 4

–¢–æ–±—Ç–æ:

pointRadius === 4

–ü—Ä–∞–≤–∏–ª—å–Ω–æ

–ê–±–æ –∑–∞–≤–∂–¥–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π:

const pointRadius = 4;


–ê–±–æ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–π –∞–¥–µ–∫–≤–∞—Ç–Ω–æ:

const pointRadius = Math.max(3, Math.min(6, 4 / scale));

üü† 4. drawSideLabels ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –Ω–∞–ø—Ä—è–º–∫—É
const dx = tx(p2.x) - tx(p1.x);
const dy = ty(p2.y) - ty(p1.y);


‚ùó –¢–∏:

–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—à –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏

–ø–æ—Ç—ñ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à —ó—Ö –¥–ª—è –Ω–∞–ø—Ä—è–º–∫—É

–¶–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—ñ —Ç–∞ offset.

–ü—Ä–∞–≤–∏–ª—å–Ω–æ

üëâ –ù–∞–ø—Ä—è–º–æ–∫ –∑–∞–≤–∂–¥–∏ —Ä–∞—Ö—É—î—Ç—å—Å—è —É –ª–æ–≥—ñ—á–Ω–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ä—ñ:

const dx = p2.x - p1.x;
const dy = p2.y - p1.y;
const length = Math.hypot(dx, dy);


–ê offset –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –º–∞–ª—é–≤–∞–Ω–Ω—ñ —Ç–µ–∫—Å—Ç—É.

üü† 5. –õ–µ–π–±–ª–∏ –º–æ–∂—É—Ç—å ‚Äú–ø–µ—Ä–µ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è‚Äù –≤—Å–µ—Ä–µ–¥–∏–Ω—É —Ñ—ñ–≥—É—Ä–∏

–¢–∏ –∑–∞–≤–∂–¥–∏ —Ä–æ–±–∏—à offset –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ, –∞–ª–µ:

–Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—à –Ω–∞–ø—Ä—è–º –æ–±—Ö–æ–¥—É (clockwise / ccw)

–¥–ª—è –¥–µ—è–∫–∏—Ö —Ñ—ñ–≥—É—Ä —Ç–µ–∫—Å—Ç –±—É–¥–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ

üëâ –ú—ñ–Ω—ñ–º—É–º:

–≤–∏–∑–Ω–∞—á–∞—Ç–∏ –Ω–∞–ø—Ä—è–º –ø–æ–ª—ñ–≥–æ–Ω—É

–º—ñ–Ω—è—Ç–∏ –∑–Ω–∞–∫ offset

(—è–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–∞—Ç–∏ –≥–æ—Ç–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é)

üü° 6. handleMouseMove ‚Üí —á–∞—Å—Ç–∏–π redraw –±–µ–∑ throttling
this.redrawCanvas();


–ù–∞ mousemove —Ü–µ –¥–µ—Å—è—Ç–∫–∏ —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É.

–†—ñ—à–µ–Ω–Ω—è
handleMouseMove(e) {
  if (this._raf) return;

  this._raf = requestAnimationFrame(() => {
    this._raf = null;
    this.redrawCanvas();
  });
}

üü° 7. closeShape ‚Äî –Ω–µ–º–∞—î —Ñ—ñ–∫—Å–∞—Ü—ñ—ó scale

–¢–∏:

—Ä–∞—Ö—É—î—à area

—Å—Ç–≤–æ—Ä—é—î—à inputs

–∞–ª–µ –Ω–µ —Ñ—ñ–∫—Å—É—î—à –º–∞—Å—à—Ç–∞–±

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –±—É–¥—å-—è–∫–∏–π redraw ‚Üí —ñ–Ω—à–∏–π scale ‚Üí labels ‚â† inputs.

‚úÖ –©–æ –≤ —Ç–µ–±–µ –∑—Ä–æ–±–ª–µ–Ω–æ –¥–æ–±—Ä–µ

‚úî —á—ñ—Ç–∫–∏–π –ø–æ–¥—ñ–ª:

Drawing

Shapes

Calculations

‚úî –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∑–∞–ª–∏–≤–∫–∏
‚úî –Ω–æ—Ä–º–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚úî –∞–¥–µ–∫–≤–∞—Ç–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ ctx

üîß –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω —Ñ—ñ–∫—Å—É

–†–æ–∑–¥—ñ–ª–∏—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏

points ‚Üí logical

canvas ‚Üí —Ç—ñ–ª—å–∫–∏ render

–ó–±–µ—Ä—ñ–≥–∞—Ç–∏ scale / offset —É AppState

–ù–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ calculateAutoScale –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É redraw

–í–∏–ø—Ä–∞–≤–∏—Ç–∏ pointRadius

–ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ dx/dy –±–µ–∑ tx/ty



–ö–†–ò–¢–ò–ß–ù–Ü –ü–û–ú–ò–õ–ö–ò (—Ä–µ–∞–ª—å–Ω–æ –ª–∞–º–∞—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É)
1. ‚ùå –ü–æ–¥–≤—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (canvas ‚Üî logical) ‚Äî –∑–Ω–æ–≤—É

–¢–µ —Å–∞–º–µ, —â–æ —ñ –≤ Drawing, –∞–ª–µ —â–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ—à–µ.

–î–µ —Å–∞–º–µ

generateRectanglePoints

generateLShapePoints

generateTrianglePoints

createWallInputsForCustomShape

handleCustomWallInputChange

üëâ points —Ç—É—Ç —É–∂–µ –≤ –ü–Ü–ö–°–ï–õ–Ø–• canvas, –∞ –ø–æ—Ç—ñ–º —Ç–∏:

–º–∞—Å—à—Ç–∞–±—É—î—à —ó—Ö

–ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î—à

–∑–Ω–æ–≤—É –º–∞–ª—é—î—à –∑ auto-scale

‚ùó –¶–µ –æ–∑–Ω–∞—á–∞—î:

predefined ‚Üí custom –ø—Ä–∞—Ü—é—î –≤ —ñ–Ω—à—ñ–π —Å–∏—Å—Ç–µ–º—ñ, –Ω—ñ–∂ custom-drawing

–ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω shape ‚Äú–ø–ª–∏–≤–µ‚Äù

area –º–æ–∂–µ —Å—Ç—Ä–∏–±–∞—Ç–∏

–°–∏–º–ø—Ç–æ–º–∏

–ø—ñ—Å–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω —Ñ—ñ–≥—É—Ä–∞ —Ç—Ä–æ—Ö–∏ ‚Äú–∑—Å—É–≤–∞—î—Ç—å—Å—è‚Äù

–ø—ñ—Å–ª—è –∫—ñ–ª—å–∫–æ—Ö –∑–º—ñ–Ω ‚Äî –ø–µ—Ä–µ–∫–æ—à—É—î—Ç—å—Å—è

–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∫–ª—é—á–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø)

points –í–°–Æ–î–ò –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤ –ª–æ–≥—ñ—á–Ω–∏—Ö –æ–¥–∏–Ω–∏—Ü—è—Ö (—É–º–æ–≤–Ω—ñ cm)
Canvas ‚Äî —Ç—ñ–ª—å–∫–∏ –¥–ª—è render

–¢–æ–±—Ç–æ:

// ‚ùå –ø–æ–≥–∞–Ω–æ
const a = sideA * CM_TO_PX;

// ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
const a = sideA; // –ª–æ–≥—ñ—á–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞


–ê CM_TO_PX –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –º–∞–ª—é–≤–∞–Ω–Ω—ñ.

2. ‚ùå originalPoints –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—é—Ç—å—Å—è ‚Äî —Ç–∏ –≤—Ç—Ä–∞—á–∞—î—à –±–∞–∑—É
–î–µ
updateWallInputsFromPoints() {
  ...
  state.originalPoints = state.points.map(...)
  state.originalWallLengths = lengths.slice();
}


‚ùó –¶–µ –∑–Ω–∏—â—É—î —Å–∞–º—É —ñ–¥–µ—é ‚Äú–æ—Ä–∏–≥—ñ–Ω–∞–ª—É‚Äù.

–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–æ

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–Ω—è—î —Å—Ç–æ—Ä–æ–Ω—É A

–¢–∏ —Ä–∞—Ö—É—î—à –Ω–æ–≤—É –≥–µ–æ–º–µ—Ç—Ä—ñ—é

–ü–æ—Ç—ñ–º –æ–≥–æ–ª–æ—à—É—î—à —ó—ó ‚Äú–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—é‚Äù

–ù–∞—Å—Ç—É–ø–Ω–∞ –∑–º—ñ–Ω–∞ ‚Üí –ø–æ—Ö–∏–±–∫–∞ √ó2

–ß–µ—Ä–µ–∑ 4‚Äì5 –∑–º—ñ–Ω —Ñ—ñ–≥—É—Ä–∞ ‚Äú—Ä–æ–∑–ª–∞–∑–∏—Ç—å—Å—è‚Äù

–Ø–∫ –º–∞—î –±—É—Ç–∏

originalPoints ‚Üí —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ closeShape

–¥–ª—è –∫–æ–∂–Ω–æ—ó –∑–º—ñ–Ω–∏:

–ø—Ä–∞—Ü—é—î—à –∑ –∫–æ–ø—ñ—î—é

–ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—à –±–∞–∑—É

// ‚ùå –ø—Ä–∏–±—Ä–∞—Ç–∏ –∑–≤—ñ–¥—Å–∏
state.originalPoints = ...

3. ‚ùå handleCustomWallInputChange –∑–º—ñ–Ω—é—î —Ç—ñ–ª—å–∫–∏ –û–î–ù–£ –≤–µ—Ä—à–∏–Ω—É
points[p2Index] = result.point;


‚ùó –ê–ª–µ:

—Å—É–º—ñ–∂–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è

–∫—É—Ç–∏ –Ω–µ —Ñ—ñ–∫—Å—É—é—Ç—å—Å—è

shape –º–æ–∂–µ —Å—Ç–∞—Ç–∏ —Å–∞–º–æ–ø–µ—Ä–µ—Ç–∏–Ω–Ω–∏–º

–¶–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–æ.

–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ

–î–ª—è –ø–æ–ª—ñ–≥–æ–Ω—É:

–∑–º—ñ–Ω–∏—Ç–∏ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É = –∑–º—ñ–Ω–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 2 –≤–µ—Ä—à–∏–Ω–∏

–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ affine scale

–∞–±–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ü–µ–Ω—Ç—Ä–æ–º + –Ω–∞–ø—Ä—è–º–∞–º–∏

üî¥ 4. calculateWallLengths –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∞–±—Å–æ–ª—é—Ç–Ω–∞ —ñ—Å—Ç–∏–Ω–∞

–¢–∏ –ø—Ä–∏–ø—É—Å–∫–∞—î—à:

const R2 = state.originalWallLengths[p2Index];


‚ùó –ê–ª–µ:

–ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó –∑–º—ñ–Ω–∏ —Ü—ñ –¥–æ–≤–∂–∏–Ω–∏ –≤–∂–µ –Ω–µ –≤–∞–ª—ñ–¥–Ω—ñ

–æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è L-shape —ñ –Ω–µ—Å–∏–º–µ—Ç—Ä–∏—á–Ω–∏—Ö —Ñ–æ—Ä–º

üü† –°–ï–†–ï–î–ù–Ü –ü–†–û–ë–õ–ï–ú–ò (–ª–∞–º–∞—é—Ç—å UX / —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å)
5. getCustomWallLengths() –ø–æ–≤–µ—Ä—Ç–∞—î input values, –∞ –Ω–µ –≥–µ–æ–º–µ—Ç—Ä—ñ—é
return state.customWallInputs.map(input => parseFloat(input.value))


‚ùó –¶–µ –Ω–µ –¥–æ–≤–∂–∏–Ω–∏ —Å—Ç–æ—Ä—ñ–Ω, —Ü–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–∞ –∑ —ñ–Ω–ø—É—Ç—ñ–≤.

–ê–ª–µ:

—É drawSideLabels —Ç–∏ –≤–≤–∞–∂–∞—î—à, —â–æ —Ü–µ —Ä–µ–∞–ª—å–Ω—ñ –¥–æ–≤–∂–∏–Ω–∏

–≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ points

üëâ –î–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ –º–∞—î –±—É—Ç–∏ geometry, –Ω–µ UI.

6. calculateCustomAreaFromInputs ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π
pixelArea * scaleFactor * scaleFactor


‚ùó –¶–µ –ø—Ä–∞—Ü—é—î –¢–Ü–õ–¨–ö–ò —è–∫—â–æ:

—Ñ—ñ–≥—É—Ä–∞ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ

–∫—É—Ç–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è

–ê —É —Ç–µ–±–µ:

–∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞

scaleFactor ‚â† –≥–ª–æ–±–∞–ª—å–Ω–∏–π

üëâ –î–ª—è –¥–æ–≤—ñ–ª—å–Ω–æ–≥–æ –ø–æ–ª—ñ–≥–æ–Ω—É:

–ø–ª–æ—â–∞ = —Ç—ñ–ª—å–∫–∏ –∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

7. L-shape –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–º (—Å–∞–º–æ–ø–µ—Ä–µ—Ç–∏–Ω)

–ù–µ–º–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

sideA >= sideC
sideF >= sideB + sideD


‚ùó –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ª–µ–≥–∫–æ –≤–≤–µ–¥–µ:

–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –≤–∏—Ä—ñ–∑ –±—ñ–ª—å—à–∏–π –∑–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π

üü° –ê–†–•–Ü–¢–ï–ö–¢–£–†–ù–Ü –ó–ê–£–í–ê–ñ–ï–ù–ù–Ø (–≤–∞–∂–ª–∏–≤–æ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
8. Shapes —Ä–æ–±–∏—Ç—å –ó–ê–ë–ê–ì–ê–¢–û

–ó–∞—Ä–∞–∑ Shapes:

–º–∞–ª—é—î

–≤–∞–ª—ñ–¥—É—é—î

–∑–º—ñ–Ω—é—î geometry

—Ä–∞—Ö—É—î –ø–ª–æ—â—É

–ø—Ä–∞—Ü—é—î –∑ DOM

üëâ –ö—Ä–∞—â–µ:

Geometry

Renderer

UIBinder

9. Predefined shapes ‚â† Custom shapes (–∞–ª–µ —Ç–∏ —ó—Ö –∑–º—ñ—à–∞–≤)
initPredefinedAsCustom()


–Ü–¥–µ—è –∫–ª–∞—Å–Ω–∞ üëç
–ê–ª–µ:

predefined ‚Üí –≤–∂–µ –≤ canvas space

custom ‚Üí –æ—á—ñ–∫—É—î logical space

–¢–æ–º—É –≤–æ–Ω–∏ –Ω–µ—Å—É–º—ñ—Å–Ω—ñ.

‚úÖ –©–æ —Ç—É—Ç –∑—Ä–æ–±–ª–µ–Ω–æ –¥–æ–±—Ä–µ

‚úî –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞
‚úî cosine rule —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∫–æ—Ä–µ–∫—Ç–Ω–æ
‚úî L-shape –ª–æ–≥—ñ–∫–∞ —á–∏—Ç–∞—î—Ç—å—Å—è
‚úî –∑—Ä–æ–∑—É–º—ñ–ª—ñ –Ω–∞–∑–≤–∏ –∑–º—ñ–Ω–Ω–∏—Ö
‚úî –∫–æ–¥ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–π (—Ü–µ –≤–∞–∂–ª–∏–≤–æ)

üîß –ú–Ü–ù–Ü–ú–ê–õ–¨–ù–ò–ô –ü–õ–ê–ù –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø (–±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ)
1Ô∏è‚É£ –ó—Ä–æ–±–∏—Ç–∏ —î–¥–∏–Ω—É —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

points ‚Üí –ª–æ–≥—ñ—á–Ω—ñ (—Å–º)

canvas ‚Üí render only

2Ô∏è‚É£ originalPoints

–≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ closeShape

–Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—é—Ç—å—Å—è

3Ô∏è‚É£ Area

—Ç—ñ–ª—å–∫–∏ –∑ points

–Ω—ñ—è–∫–∏—Ö scaleFactor¬≤

4Ô∏è‚É£ getCustomWallLengths

—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑ geometry, –Ω–µ –∑ inputs


–ö–†–ò–¢–ò–ß–ù–Ü –ü–û–ú–ò–õ–ö–ò (–ª–∞–º–∞—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤)
1. ‚ùå calculateQuadrilateralArea ‚Äî –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê —Ñ–æ—Ä–º—É–ª–∞
calculateQuadrilateralArea: function (a, b, c, d) {
  const s_a = (a + c) / 2;
  const s_b = (b + d) / 2;
  return s_a * s_b;
}


‚ùó –¶–µ –ù–ï —Ñ–æ—Ä–º—É–ª–∞ –ø–ª–æ—â—ñ —á–æ—Ç–∏—Ä–∏–∫—É—Ç–Ω–∏–∫–∞
–¶–µ –≥—Ä—É–±–µ –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—è, —è–∫–µ –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞, –¥–µ:

a = c
b = d

–ù–∞—Å–ª—ñ–¥–∫–∏

—Ç—Ä–∞–ø–µ—Ü—ñ—ó ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–ª–æ—â–∞

–ø–µ—Ä–µ–∫–æ—à–µ–Ω—ñ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∏ ‚Üí –ø–æ–º–∏–ª–∫–∞

predefined rectangle –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ ‚Üí –±—Ä–µ—Ö–ª–∏–≤–∞ –ø–ª–æ—â–∞

–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ê–±–æ:

shoelace –ø–æ 4 —Ç–æ—á–∫–∞—Ö
–ê–±–æ (—è–∫—â–æ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫):

return a * b;


üëâ –¶—é —Ñ—É–Ω–∫—Ü—ñ—é –∫—Ä–∞—â–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é, –≤–æ–Ω–∞ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞.

2. ‚ùå calculateLShapeArea –º–æ–∂–µ –¥–∞–≤–∞—Ç–∏ –í–Ü–î º–Ñ–ú–ù–£ –ø–ª–æ—â—É
return sideA * sideF - sideC * sideD;


‚ùó –ù–µ–º–∞—î –∂–æ–¥–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —â–æ:

sideA > sideC
sideF > sideD

–ü—Ä–∏–∫–ª–∞–¥
sideA = 200
sideF = 200
sideC = 180
sideD = 190


üëâ –ø–ª–æ—â–∞ ‚âà -2000 ü§Ø

–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∑–∞—Ö–∏—Å—Ç
if (sideC >= sideA || sideD >= sideF) return 0;

3. ‚ùå –ó–º—ñ—à—É–≤–∞–Ω–Ω—è –û–î–ò–ù–ò–¶–¨ (px / cm / visual units)

–¶–µ –≥–æ–ª–æ–≤–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –≥—Ä—ñ—Ö.

–ü—Ä–∏–∫–ª–∞–¥
calculateCustomShapeArea(points) // –ø–æ–≤–µ—Ä—Ç–∞—î px¬≤
...
areaVisualUnits = pixelArea / (CM_TO_PX * CM_TO_PX);
...
areaCm2 = areaVisualUnits * unitMultiplier * unitMultiplier;


‚ùó –ê–ª–µ:

points —ñ–Ω–æ–¥—ñ –≤–∂–µ –≤ px

—ñ–Ω–æ–¥—ñ ‚Äî –≤ ‚Äúvisual units‚Äù

—ñ–Ω–æ–¥—ñ ‚Äî –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∑ predefined

üëâ –û–¥–Ω–∞ —ñ —Ç–∞ —Å–∞–º–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î –≤ 3 —Å–∏—Å—Ç–µ–º–∞—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

–°–∏–º–ø—Ç–æ–º–∏

–ø–ª–æ—â–∞ ‚Äú—Å—Ç—Ä–∏–±–∞—î‚Äù –ø—Ä–∏ –∑–º—ñ–Ω—ñ –æ–¥–∏–Ω–∏—Ü—å

predefined ‚â† custom –ø—Ä–∏ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö —á–∏—Å–ª–∞—Ö

area –Ω–µ –º–∞—Å—à—Ç–∞–±—É—é—Ç—å—Å—è –ª—ñ–Ω—ñ–π–Ω–æ

4. ‚ùå calculateAreaFromInputs ‚Äî –ª–æ–≥—ñ—á–Ω–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞
areaVisualUnits = this.calculateQuadrilateralArea(...)


‚ùó –¢–∏ —Ä–∞—Ö—É—î—à –ø–ª–æ—â—É –∑ —ñ–Ω–ø—É—Ç—ñ–≤, –∞–ª–µ:

—ñ–Ω–ø—É—Ç–∏ ‚â† —Ä–µ–∞–ª—å–Ω–∞ –≥–µ–æ–º–µ—Ç—Ä—ñ—è

–¥–ª—è custom shape —ñ–Ω–ø—É—Ç–∏ –º–æ–∂—É—Ç—å –ù–ï –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ points

üëâ –¶–µ –¥–∞—î UI-–ø–ª–æ—â—É, –Ω–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω—É –ø–ª–æ—â—É

üü† –°–ï–†–ï–î–ù–Ü –ü–û–ú–ò–õ–ö–ò (–ø—Å—É—é—Ç—å —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å)
5. findCircleIntersection ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ –≤–∞–ª—ñ–¥–Ω–∞, –∞–ª–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∞

–§–æ—Ä–º—É–ª–∞ ‚Äî –æ–∫ üëç
–ê–õ–ï:

adjustedR2 = d - R1;


–∞–±–æ

adjustedR2 = R1 - d + 0.1;


‚ùó –¶–µ –Ω–∞—Å–∏–ª—å–Ω–µ ‚Äú–ø—ñ–¥–≥–∞–Ω—è–Ω–Ω—è‚Äù –≥–µ–æ–º–µ—Ç—Ä—ñ—ó, —è–∫–µ:

–ª–∞–º–∞—î —Å—É–º—ñ–∂–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏

–Ω–∞–∫–æ–ø–∏—á—É—î –ø–æ—Ö–∏–±–∫—É

–º–æ–∂–µ –∑—Ä–æ–±–∏—Ç–∏ self-intersection

–¶–µ –Ω–µ –ø–æ–º–∏–ª–∫–∞ JS, –∞ –ø–æ–º–∏–ª–∫–∞ –º–æ–¥–µ–ª—ñ.

6. calculateWallLengths ‚Äî –û–ö, –∞–ª–µ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ –Ω–µ —Ç–µ

–§—É–Ω–∫—Ü—ñ—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞ ‚úî
–ê–ª–µ:

—ñ–Ω—à—ñ –º–æ–¥—É–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —ó—ó —è–∫ ‚Äú–∞–±—Å–æ–ª—é—Ç–Ω—É –ø—Ä–∞–≤–¥—É‚Äù

—Ö–æ—á–∞ points –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∂–µ –∑—ñ–ø—Å–æ–≤–∞–Ω—ñ

7. calculateMaterialRequirements ‚Äî –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ–¥–∏–Ω–∏—Ü—å
const unitArea = materialWidth * materialHeight;


‚ùó –ù–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è:

materialWidth –≤ cm?

shapeArea –≤ cm¬≤?

üëâ –Ø–∫—â–æ —Ö—Ç–æ—Å—å –ø–µ—Ä–µ–¥–∞—Å—Ç—å –º¬≤ ‚Äî —É—Å–µ –∑–ª–∞–º–∞—î—Ç—å—Å—è –º–æ–≤—á–∫–∏.

üü° –î–†–Ü–ë–ù–Ü / –ê–†–•–Ü–¢–ï–ö–¢–£–†–ù–Ü
8. calculateQuadrilateralArea –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞

–£ —Ç–µ–±–µ –≤–∂–µ —î:

calculateCustomShapeArea (shoelace)


üëâ –ö—Ä–∞—â–µ:

–∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 4 —Ç–æ—á–∫–∏

–ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ shoelace

–æ–¥–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è –≤—Å—å–æ–≥–æ

9. calculateAreaFromInputs –¥—É–±–ª—é—î –ª–æ–≥—ñ–∫—É

–£ —Ç–µ–±–µ —î:

calculatePredefinedShapeArea

calculateCustomShapeArea

calculateAreaFromInputs

‚ùó –¢—Ä–∏ —Ä—ñ–∑–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞ –ø–ª–æ—â—ñ ‚Üí —Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω

‚úÖ –©–æ —Ç—É—Ç –∑—Ä–æ–±–ª–µ–Ω–æ –î–û–ë–†–ï

‚úî shoelace ‚Äî —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úî Heron ‚Äî –∫–æ—Ä–µ–∫—Ç–Ω–∏–π
‚úî triangle validation ‚úî
‚úî circle area ‚úî
‚úî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è —á–∏—Å—Ç–∞

üß† –ì–û–õ–û–í–ù–ò–ô –í–ò–°–ù–û–í–û–ö

‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ —Ñ–æ—Ä–º—É–ª–∞—Ö, –∞ –≤ —Ç–æ–º—É, —â–æ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å —É —Ä—ñ–∑–Ω–∏—Ö –æ–¥–∏–Ω–∏—Ü—è—Ö —ñ –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª

–¢–≤—ñ–π –∫–æ–¥ –∑–∞—Ä–∞–∑:

–º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π ‚ùå‚ùå

–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∏–π ‚ùå‚ùå‚ùå

üîß –Ø–ö –í–ò–ü–†–ê–í–ò–¢–ò –ú–Ü–ù–Ü–ú–ê–õ–¨–ù–û

1Ô∏è‚É£ –û–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

geometry ‚Üí cm

canvas ‚Üí px

inputs ‚Üí cm

2Ô∏è‚É£ –û–¥–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –ø–ª–æ—â—ñ

shoelace –¥–ª—è –í–°–Ü–• –ø–æ–ª—ñ–≥–æ–Ω—ñ–≤

circle ‚Üí –æ–∫—Ä–µ–º–∞

3Ô∏è‚É£ Area = –¢–Ü–õ–¨–ö–ò –∑ geometry

–Ω—ñ–∫–æ–ª–∏ –∑ inputs –Ω–∞–ø—Ä—è–º—É

4Ô∏è‚É£ QuadrilateralArea ‚Äî –≤–∏–¥–∞–ª–∏—Ç–∏